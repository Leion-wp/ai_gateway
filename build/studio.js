(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var i in t)e.o(t,i)&&!e.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:t[i]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React,t=window.wp.blocks,i=window.wp.blockEditor,n=window.wp.apiFetch;var s=e.n(n);const o=window.wp.i18n,l=window.wp.element,c=window.AIGatewaySettings||{restUrl:"",nonce:"",agents:[]};function r(){const[e,t]=(0,l.useState)(c.agents||[]),[i,n]=(0,l.useState)(c.studioDefaultAgent||c.agents?.[0]?.id||0),[r,d]=(0,l.useState)(""),[m,u]=(0,l.useState)({}),[p,g]=(0,l.useState)([]),[y,v]=(0,l.useState)([]),[E,w]=(0,l.useState)(0),[_,h]=(0,l.useState)([]),[b,N]=(0,l.useState)(0),[f,k]=(0,l.useState)(!1),[S,C]=(0,l.useState)(""),[T,A]=(0,l.useState)(!1),[P,$]=(0,l.useState)("empty"),[j,O]=(0,l.useState)(null),[x,U]=(0,l.useState)(0),[D,R]=(0,l.useState)(""),[M,L]=(0,l.useState)(!1),[F,I]=(0,l.useState)(360),[W,G]=(0,l.useState)(!1),[B,q]=(0,l.useState)([]),[z,J]=(0,l.useState)(""),[X,H]=(0,l.useState)(""),[K,Q]=(0,l.useState)([]),[V,Y]=(0,l.useState)(!1),[Z,ee]=(0,l.useState)(!1),[ae,te]=(0,l.useState)(!1),[ie,ne]=(0,l.useState)(!1),[se,oe]=(0,l.useState)(""),[le,ce]=(0,l.useState)("article"),[re,de]=(0,l.useState)(""),[me,ue]=(0,l.useState)(""),[pe,ge]=(0,l.useState)(""),ye=async(e,a,t)=>{if(e)try{await s()({path:`/ai/v1/conversations/${e}/messages`,method:"POST",data:{role:a,content:t}})}catch(e){C(e.message||"Failed to save message.")}},ve=(0,l.useMemo)(()=>e.find(e=>e.id===i),[e,i]),Ee=(e=>(e||[]).map(e=>"string"==typeof e?{key:e,label:e,type:"text"}:e&&e.key?{key:e.key,label:e.label||e.key,type:e.type||"text",options:e.options||[],placeholder:e.placeholder||"",required:Boolean(e.required),env:e.env||""}:null).filter(Boolean))(ve?.input_schema||[]).filter(e=>!e.env),we=c.adminUrl||"/wp-admin/",_e=ve?.tools||[],he=(0,l.useMemo)(()=>{const a={};return e.forEach(e=>{a[e.id]=e}),a},[e]),be=()=>{const e={};Ee.forEach(a=>{e[a.key]=""}),u(e)};(0,l.useEffect)(()=>{if(e.length)return;let a=!0;return(async()=>{try{const e=await s()({path:"/ai/v1/agents?enabled=1",method:"GET"});if(!a)return;const i=Array.isArray(e)?e:[];t(i);const o=c.studioDefaultAgent||0,l=i.find(e=>e.id===o);n(l?.id||i[0]?.id||0)}catch(e){a&&C(e.message||"Failed to load agents.")}})(),()=>{a=!1}},[e.length]),(0,l.useEffect)(()=>{be(),q(ve?.tools||[])},[i]),(0,l.useEffect)(()=>{if(!W)return;const e=e=>{const a=Math.min(640,Math.max(260,window.innerWidth-e.clientX-24));I(a)},a=()=>{G(!1)};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",a)}},[W]),(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{const a=await s()({path:"/ai/v1/projects",method:"GET"}),t=Array.isArray(a)?a:[];if(!e)return;if(!t.length){const e=await s()({path:"/ai/v1/projects",method:"POST",data:{name:"General"}});return v([e]),void w(e.id)}v(t),w(t[0]?.id||0)}catch(a){e&&C(a.message||"Failed to load projects.")}})(),()=>{e=!1}},[]),(0,l.useEffect)(()=>{if(!E)return;let e=!0;return(async()=>{try{const a=await s()({path:`/ai/v1/conversations?project_id=${E}&include_archived=${Z?"1":"0"}`,method:"GET"});if(!e)return;const t=Array.isArray(a)?a:[];h(t),N(t[0]?.id||0)}catch(a){e&&C(a.message||"Failed to load conversations.")}})(),()=>{e=!1}},[E,Z]),(0,l.useEffect)(()=>{if(!b)return void g([]);let e=!0;return(async()=>{try{const a=await s()({path:`/ai/v1/conversations/${b}`,method:"GET"});e&&a?.messages&&g(a.messages)}catch(a){e&&C(a.message||"Failed to load conversation.")}})(),()=>{e=!1}},[b]);const Ne=(e,a)=>{g(t=>{if(!t.length)return t;const i=[...t],n=i[i.length-1];return"assistant"!==n.role?t:(i[i.length-1]={...n,content:a?e:n.content+e},i)})},fe=async()=>{k(!0),te(!0),C("");const e=B.length?`${r}\n\nTools: ${B.join(", ")}`:r;let a=b;if(!a){const e=await s()({path:"/ai/v1/conversations",method:"POST",data:{name:"Conversation",project_id:E}});a=e.id,h(a=>[e,...a]),N(e.id)}g(e=>[...e,{role:"user",content:r}]),ye(a,"user",e);try{for(const t of K){const i=await s()({path:"/ai/v1/run",method:"POST",data:{agent_id:t,instruction:e,inputs:m}}),n=i?.mcp_response||i?.ollama_response||i?.error||"",o=`${he[t]?.name||"Agent"}: ${n}`;g(e=>[...e,{role:"assistant",content:o}]),ye(a,"assistant",o)}}catch(e){C(e.message||"Chain failed.")}finally{k(!1),te(!1),d("")}};return(0,a.createElement)("div",{className:"ai-studio-app",style:{gridTemplateColumns:`280px 1fr ${F}px`}},(0,a.createElement)("aside",{className:"ai-studio-sidebar"},(0,a.createElement)("div",{className:"ai-studio-sidebar-section"},(0,a.createElement)("div",{className:"ai-studio-sidebar-title"},(0,o.__)("Projects","ai-gateway")),(0,a.createElement)("div",{className:"ai-studio-project-row"},(0,a.createElement)("select",{className:"ai-studio-select",value:E,onChange:e=>w(Number(e.target.value))},y.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name))),(0,a.createElement)("button",{type:"button",className:"ai-studio-icon-button",onClick:()=>{ne(!0);const e=y.find(e=>e.id===E);oe(e?.name||"")}},"⋯"))),(0,a.createElement)("div",{className:"ai-studio-sidebar-section"},(0,a.createElement)("div",{className:"ai-studio-sidebar-title"},(0,o.__)("Conversations","ai-gateway")),(0,a.createElement)("label",{className:"ai-studio-checkbox"},(0,a.createElement)("input",{type:"checkbox",checked:Z,onChange:e=>ee(e.target.checked)}),(0,o.__)("Show archived","ai-gateway")),(0,a.createElement)("div",{className:"ai-studio-conversation-list"},_.map(e=>(0,a.createElement)("div",{key:e.id,className:"ai-studio-conversation-row"},(0,a.createElement)("button",{type:"button",className:"ai-studio-conversation "+(e.id===b?"active":""),onClick:()=>N(e.id)},(0,a.createElement)("div",{className:"ai-studio-conversation-title"},e.name),e.archived&&(0,a.createElement)("div",{className:"ai-studio-conversation-last"},(0,o.__)("Archived","ai-gateway")),e.last&&(0,a.createElement)("div",{className:"ai-studio-conversation-last"},e.last)),(0,a.createElement)("button",{type:"button",className:"ai-studio-icon-button",onClick:()=>{O(e.id),U(0),R("")}},"⋯")))),(0,a.createElement)("button",{type:"button",className:"ai-studio-button secondary",onClick:async()=>{const e=await s()({path:"/ai/v1/conversations",method:"POST",data:{name:"Conversation",project_id:E}});h(a=>[e,...a]),N(e.id)}},(0,o.__)("New chat","ai-gateway"))),(0,a.createElement)("div",{className:"ai-studio-sidebar-section"},(0,a.createElement)("div",{className:"ai-studio-sidebar-title"},(0,o.__)("Agents","ai-gateway")),(0,a.createElement)("select",{className:"ai-studio-select",value:i,onChange:e=>n(Number(e.target.value))},e.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,a.createElement)("div",{className:"ai-studio-sidebar-section"},(0,a.createElement)("div",{className:"ai-studio-sidebar-title"},(0,o.__)("Tools","ai-gateway")),0===_e.length&&(0,a.createElement)("div",{className:"ai-studio-sidebar-empty"},(0,o.__)("Assigned via agent.","ai-gateway")),_e.map(e=>(0,a.createElement)("label",{key:e,className:"ai-studio-checkbox"},(0,a.createElement)("input",{type:"checkbox",checked:B.includes(e),onChange:a=>{const t=a.target.checked;q(a=>t?[...a,e]:a.filter(a=>a!==e))}}),e))),(0,a.createElement)("div",{className:"ai-studio-sidebar-section"},(0,a.createElement)("div",{className:"ai-studio-sidebar-title"},(0,o.__)("Settings","ai-gateway")),(0,a.createElement)("button",{type:"button",className:"ai-studio-button secondary",onClick:()=>A(!0)},(0,o.__)("Open settings","ai-gateway")),(0,a.createElement)("button",{type:"button",className:"ai-studio-button secondary",onClick:()=>$("agents")},(0,o.__)("Agents editor","ai-gateway")))),(0,a.createElement)("main",{className:"ai-studio-main"},(0,a.createElement)("div",{className:"ai-studio-topbar"},(0,a.createElement)("div",{className:"ai-studio-topbar-left"},(0,a.createElement)("span",{className:"ai-studio-topbar-label"},(0,o.__)("Active agent","ai-gateway")),(0,a.createElement)("span",{className:"ai-studio-topbar-value"},ve?.name||(0,o.__)("None","ai-gateway"))),(0,a.createElement)("div",{className:"ai-studio-topbar-right"},(0,a.createElement)("span",{className:"ai-studio-status-dot"}),(0,a.createElement)("span",null,(0,o.__)("Ollama: online","ai-gateway")),(0,a.createElement)("select",{className:"ai-studio-select",value:P,onChange:e=>$(e.target.value)},(0,a.createElement)("option",{value:"empty"},(0,o.__)("Chat","ai-gateway")),(0,a.createElement)("option",{value:"editor"},(0,o.__)("Editor","ai-gateway")),(0,a.createElement)("option",{value:"workflow"},(0,o.__)("Workflow","ai-gateway")),(0,a.createElement)("option",{value:"preview"},(0,o.__)("Preview","ai-gateway")),(0,a.createElement)("option",{value:"agents"},(0,o.__)("Agents","ai-gateway"))))),(0,a.createElement)("div",{className:"ai-studio-chat"},p.map((e,t)=>(0,a.createElement)("div",{key:t,className:`ai-studio-message ai-studio-${e.role}`},(0,a.createElement)("div",{className:"ai-studio-message-role"},e.role),(0,a.createElement)("div",{className:"ai-studio-message-content"},e.content))),ae&&(0,a.createElement)("div",{className:"ai-studio-typing"},ve?.name||(0,o.__)("Agent","ai-gateway")," ",(0,o.__)("is typing...","ai-gateway"))),Ee.length>0&&(0,a.createElement)("div",{className:"ai-studio-inputs"},Ee.map(e=>(0,a.createElement)("label",{key:e.key,className:"ai-studio-field"},(0,a.createElement)("span",null,e.label),(0,a.createElement)("input",{type:"number"===e.type?"number":"url"===e.type?"url":"text",value:m[e.key]||"",placeholder:e.placeholder,onChange:a=>u(t=>({...t,[e.key]:a.target.value}))})))),(0,a.createElement)("div",{className:"ai-studio-composer"},S&&(0,a.createElement)("div",{className:"ai-studio-error"},S),(0,a.createElement)("div",{className:"ai-studio-composer-row"},(0,a.createElement)("button",{className:"ai-studio-button icon",type:"button",title:(0,o.__)("Add","ai-gateway"),onClick:()=>L(e=>!e)},"+"),M&&(0,a.createElement)("div",{className:"ai-studio-plus-menu"},(0,a.createElement)("button",{type:"button",onClick:()=>{L(!1),$("tools")}},(0,o.__)("Tools","ai-gateway")),(0,a.createElement)("button",{type:"button",onClick:()=>{L(!1),$("upload")}},(0,o.__)("Upload image","ai-gateway")),(0,a.createElement)("button",{type:"button",onClick:()=>{L(!1),$("chain")}},(0,o.__)("Chain agents","ai-gateway"))),(0,a.createElement)("textarea",{className:"ai-studio-textarea",rows:"3",placeholder:(0,o.__)("Ask something...","ai-gateway"),value:r,onChange:e=>d(e.target.value)}),(0,a.createElement)("button",{className:"ai-studio-button",onClick:async()=>{if(!i)return void C("No agent selected.");if(V&&K.length>0)return void await fe();k(!0),te(!0),C("");const e=B.length?`${r}\n\nTools: ${B.join(", ")}`:r;let a=b;if(!a){const e=await s()({path:"/ai/v1/conversations",method:"POST",data:{name:"Conversation",project_id:E}});a=e.id,h(a=>[e,...a]),N(e.id)}const t={role:"user",content:r};g(e=>[...e,t,{role:"assistant",content:""}]),ye(a,"user",e);try{const t=`${c.restUrl?c.restUrl.replace(/\/$/,""):"/wp-json/ai/v1"}/run/stream`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":c.nonce||""},body:JSON.stringify({agent_id:i,instruction:e,inputs:m})}),s=n.headers.get("content-type")||"";if(!n.ok||!n.body||!s.includes("text/event-stream"))throw new Error("Stream unavailable");const o=n.body.getReader(),l=new TextDecoder("utf-8");let r="";for(;;){const{value:e,done:t}=await o.read();if(t)break;r+=l.decode(e,{stream:!0});const i=r.split("\n\n");r=i.pop()||"",i.forEach(e=>{e.split("\n").forEach(e=>{if(!e.startsWith("data: "))return;const t=e.slice(6).trim();if(t)try{const e=JSON.parse(t);if(e.error)return void C(e.error);e.delta&&Ne(e.delta,!1),e.done&&e.full&&(Ne(e.full,!0),ye(a,"assistant",e.full),te(!1))}catch(e){C(e.message||"Stream parse error.")}})})}}catch(t){try{const t=await s()({path:"/ai/v1/run",method:"POST",data:{agent_id:i,instruction:e,inputs:m}});if(t?.error)C(t.error);else{const e=t?.mcp_response||t?.ollama_response||"";Ne(e,!0),ye(a,"assistant",e)}}catch(e){C(e.message||t.message||"Stream failed.")}}finally{k(!1),d(""),te(!1)}},disabled:f},f?(0,o.__)("Running...","ai-gateway"):(0,o.__)("Send","ai-gateway"))),(0,a.createElement)("div",{className:"ai-studio-actions"},(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:be},(0,o.__)("Reset","ai-gateway")),(0,a.createElement)("label",{className:"ai-studio-checkbox"},(0,a.createElement)("input",{type:"checkbox",checked:V,onChange:e=>Y(e.target.checked)}),(0,o.__)("Use chain","ai-gateway"))))),(0,a.createElement)("aside",{className:"ai-studio-workspace"},(0,a.createElement)("div",{className:"ai-studio-resizer",onMouseDown:()=>G(!0),title:(0,o.__)("Resize","ai-gateway")}),"agents"===P?(0,a.createElement)("iframe",{title:"Agents",className:"ai-studio-iframe",src:`${we}admin.php?page=ai-gateway-agents&action=edit&agent_id=${i}&studio=1`}):"tools"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-empty"},(0,o.__)("Tools panel (coming soon)","ai-gateway")):"upload"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-panel"},(0,a.createElement)("h3",null,(0,o.__)("Upload image","ai-gateway")),(0,a.createElement)("input",{className:"ai-studio-input",value:z,onChange:e=>J(e.target.value),placeholder:(0,o.__)("Image URL","ai-gateway")}),(0,a.createElement)("button",{className:"ai-studio-button",onClick:async()=>{H("");try{const e=await s()({path:"/ai/v1/media/import",method:"POST",data:{url:z}});H(e?.url?`Imported: ${e.url}`:"Imported")}catch(e){H(e.message||"Upload failed.")}}},(0,o.__)("Import","ai-gateway")),X&&(0,a.createElement)("div",{className:"ai-studio-sidebar-empty"},X)):"chain"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-panel"},(0,a.createElement)("h3",null,(0,o.__)("Agent chain","ai-gateway")),e.map(e=>(0,a.createElement)("label",{key:e.id,className:"ai-studio-checkbox"},(0,a.createElement)("input",{type:"checkbox",checked:K.includes(e.id),onChange:a=>{const t=a.target.checked;Q(a=>t?[...a,e.id]:a.filter(a=>a!==e.id))}}),e.name)),(0,a.createElement)("button",{className:"ai-studio-button",onClick:fe,disabled:f},(0,o.__)("Run chain","ai-gateway"))):"editor"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-panel"},(0,a.createElement)("h3",null,(0,o.__)("Content editor","ai-gateway")),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Type","ai-gateway")),(0,a.createElement)("select",{className:"ai-studio-select",value:le,onChange:e=>ce(e.target.value)},(0,a.createElement)("option",{value:"article"},(0,o.__)("Article","ai-gateway")),(0,a.createElement)("option",{value:"page"},(0,o.__)("Page","ai-gateway")),(0,a.createElement)("option",{value:"workflow"},(0,o.__)("Workflow","ai-gateway")))),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Title","ai-gateway")),(0,a.createElement)("input",{className:"ai-studio-input",value:re,onChange:e=>de(e.target.value)})),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Content","ai-gateway")),(0,a.createElement)("textarea",{className:"ai-studio-textarea editor",rows:"8",value:me,onChange:e=>ue(e.target.value)})),pe&&(0,a.createElement)("div",{className:"ai-studio-sidebar-empty"},pe),(0,a.createElement)("button",{className:"ai-studio-button",onClick:async()=>{ge("");try{const e="page"===le?"/wp/v2/pages":"/wp/v2/posts",a=await s()({path:e,method:"POST",data:{title:re||"Draft",content:me,status:"draft"}});ge(`Draft created: #${a.id}`)}catch(e){ge(e.message||"Failed to create draft.")}}},(0,o.__)("Create draft","ai-gateway"))):"workflow"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-empty"},(0,o.__)("Workflow editor (coming soon)","ai-gateway")):"preview"===P?(0,a.createElement)("div",{className:"ai-studio-workspace-empty"},(0,o.__)("Preview panel (coming soon)","ai-gateway")):(0,a.createElement)("div",{className:"ai-studio-workspace-empty"},(0,o.__)("Workspace","ai-gateway"))),j&&(0,a.createElement)("div",{className:"ai-studio-modal"},(0,a.createElement)("div",{className:"ai-studio-modal-card"},(0,a.createElement)("h3",null,(0,o.__)("Conversation actions","ai-gateway")),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Rename","ai-gateway")),(0,a.createElement)("input",{value:_.find(e=>e.id===j)?.name||"",onChange:e=>{const a=e.target.value;h(e=>e.map(e=>e.id===j?{...e,name:a}:e))}})),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Move to project","ai-gateway")),(0,a.createElement)("select",{className:"ai-studio-select",value:x,onChange:e=>U(Number(e.target.value))},(0,a.createElement)("option",{value:"0"},(0,o.__)("Select project","ai-gateway")),y.map(e=>(0,a.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Or create project","ai-gateway")),(0,a.createElement)("input",{value:D,onChange:e=>R(e.target.value),placeholder:(0,o.__)("New project name","ai-gateway")})),(0,a.createElement)("div",{className:"ai-studio-modal-actions"},(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:async()=>{const e=_.find(e=>e.id===j)?.name||"";await s()({path:`/ai/v1/conversations/${j}`,method:"PUT",data:{name:e}}),O(null)}},(0,o.__)("Rename","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:async()=>{await(async e=>{let a=x;if(!a&&""!==D.trim()){const e=await s()({path:"/ai/v1/projects",method:"POST",data:{name:D.trim()}});v(a=>[e,...a]),a=e.id}a&&(await s()({path:`/ai/v1/conversations/${e}`,method:"PUT",data:{project_id:a}}),h(a=>a.filter(a=>a.id!==e)),b===e&&N(0))})(j),O(null)}},(0,o.__)("Move","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:async()=>{await(async e=>{await s()({path:`/ai/v1/conversations/${e}/archive`,method:"POST"}),h(a=>a.filter(a=>a.id!==e)),b===e&&N(0)})(j),O(null)}},(0,o.__)("Archive","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button",onClick:async()=>{await(async e=>{await s()({path:`/ai/v1/conversations/${e}`,method:"DELETE"}),h(a=>a.filter(a=>a.id!==e)),b===e&&N(0)})(j),O(null)}},(0,o.__)("Delete","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:()=>O(null)},(0,o.__)("Cancel","ai-gateway"))))),ie&&(0,a.createElement)("div",{className:"ai-studio-modal"},(0,a.createElement)("div",{className:"ai-studio-modal-card"},(0,a.createElement)("h3",null,(0,o.__)("Project actions","ai-gateway")),(0,a.createElement)("label",{className:"ai-studio-field"},(0,a.createElement)("span",null,(0,o.__)("Rename","ai-gateway")),(0,a.createElement)("input",{value:se,onChange:e=>oe(e.target.value)})),(0,a.createElement)("div",{className:"ai-studio-modal-actions"},(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:async()=>{await s()({path:`/ai/v1/projects/${E}`,method:"PUT",data:{name:se}}),v(e=>e.map(e=>e.id===E?{...e,name:se}:e)),ne(!1)}},(0,o.__)("Rename","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button",onClick:async()=>{await s()({path:`/ai/v1/projects/${E}`,method:"DELETE"}),v(e=>e.filter(e=>e.id!==E)),w(0),ne(!1)}},(0,o.__)("Delete","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-button secondary",onClick:()=>ne(!1)},(0,o.__)("Cancel","ai-gateway"))))),T&&(0,a.createElement)("div",{className:"ai-studio-modal"},(0,a.createElement)("div",{className:"ai-studio-modal-card large"},(0,a.createElement)("div",{className:"ai-studio-modal-header"},(0,a.createElement)("h3",null,(0,o.__)("Settings","ai-gateway")),(0,a.createElement)("button",{className:"ai-studio-icon-button",onClick:()=>A(!1)},"✕")),(0,a.createElement)("iframe",{title:"Settings",className:"ai-studio-iframe",src:`${we}admin.php?page=ai-gateway-settings&studio=1`}))))}c.nonce&&s().use(s().createNonceMiddleware(c.nonce)),(0,t.registerBlockType)("ai-gateway/studio",{title:(0,o.__)("AI Studio","ai-gateway"),icon:"format-chat",category:"widgets",edit(){const e=(0,i.useBlockProps)({className:"ai-studio-block-placeholder"});return(0,a.createElement)("div",{...e},(0,o.__)("AI Studio App","ai-gateway"))},save(){const e=i.useBlockProps.save({className:"ai-studio-app"});return(0,a.createElement)("div",{...e})}});const d=()=>{const e=document.querySelectorAll(".ai-studio-app");e.length&&e.forEach(e=>{window.wp.element.render((0,a.createElement)(r,null),e)})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()})();